{"version":3,"sources":["./src/app/home/home-routing.module.ts","./src/app/home/home.module.ts","./src/app/home/home.page.ts","./src/app/home/home.page.scss","./src/app/home/home.page.html"],"names":[],"mappings":"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","file":"src_app_home_home_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","import { Component,OnInit } from '@angular/core';\nimport { element } from 'protractor';\nimport Swal from 'sweetalert2';\nimport { FotosService } from '../services/foto.service';\nimport { io } from \"socket.io-client\";\nimport { GLOBALSOCKET } from 'src/app/services/GLOBAL';\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n\n  public token;\n  public fotos : Array<any> = [];\n  public fotosnuevas : Array<any> = [];\n  public load_data = true;\n  public likes :  Array<any> = [];\n  public identity;\n  public socket = io(GLOBALSOCKET.url,{transports: ['websocket'], upgrade: false});\n\n  constructor(\n    private _fotoService: FotosService\n  ) {\n    this.token = localStorage.getItem('token');\n    this.identity = JSON.parse(localStorage.getItem('identity'));\n  }\n  ngOnInit(): void {\n\n    this.socket.on('get-data',(data)=>{\n      this.get_fotos();\n    })\n\n    this.socket.on('get-comments',(data)=>{\n      this.get_fotos();\n    })\n\n    this.get_fotos();\n    \n  }\n\n\n  get_fotos(){\n    this._fotoService.get_fotos_home(this.token).subscribe(\n      response => {\n        this.fotos = response.data;\n        this.likes = response.user_likes;\n        this.load_data= false;\n      },error =>{\n        console.log(error);\n      }\n    )\n    \n      \n\n  }\n\n  like_imagen(fotoid)\n  {\n    this._fotoService.like_foto(fotoid,this.token).subscribe(\n      response => {\n        this.socket.emit('like-image',response);\n\n      },error =>{\n        Swal.fire({\n          icon:'error',\n          title:'ERROR!',\n          text:error.error.message\n        })\n      }\n    )\n  }\n \n  doRefresh(event) {\n\n\n    setTimeout(() => {\n      this.get_fotos();\n      event.target.complete();\n    }, 2000);\n  }\n\n  }\n\n\n\n  \n\n\n\n","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container strong {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container a {\\n  text-decoration: none;\\n}\\n\\nion-icon {\\n  font-size: 24px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7RUFFQSxrQkFBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsUUFBQTtFQUNBLDJCQUFBO0FBQUY7O0FBR0E7RUFDRSxlQUFBO0VBQ0EsaUJBQUE7QUFBRjs7QUFHQTtFQUNFLGVBQUE7RUFDQSxpQkFBQTtFQUVBLGNBQUE7RUFFQSxTQUFBO0FBRkY7O0FBS0E7RUFDRSxxQkFBQTtBQUZGOztBQU9BO0VBQ0UsZUFBQTtBQUpGIiwiZmlsZSI6ImhvbWUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2NvbnRhaW5lciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcblxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICB0b3A6IDUwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xufVxuXG4jY29udGFpbmVyIHN0cm9uZyB7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgbGluZS1oZWlnaHQ6IDI2cHg7XG59XG5cbiNjb250YWluZXIgcCB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDIycHg7XG5cbiAgY29sb3I6ICM4YzhjOGM7XG5cbiAgbWFyZ2luOiAwO1xufVxuXG4jY29udGFpbmVyIGEge1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59XG5cblxuXG5pb24taWNvbiB7XG4gIGZvbnQtc2l6ZTogMjRweDtcbn0iXX0= */\";","export default \"<ion-header>\\n  <ion-toolbar translucent>\\n    <ion-title class=\\\"text-light\\\">\\n        <h3>Inicio</h3>\\n        \\n\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content\\n      pullingIcon=\\\"chevron-down-circle-outline\\\"\\n      pullingText=\\\"Pull to refresh\\\"\\n      refreshingSpinner=\\\"circles\\\"\\n      refreshingText=\\\"Refreshing...\\\">\\n    </ion-refresher-content>\\n  </ion-refresher>\\n   <ng-container *ngIf=\\\"fotos.length >= 1\\\"  >\\n     <div *ngFor=\\\"let item of fotos\\\"> \\n\\n      <ion-card style=\\\"background-color: #242526;\\\" >\\n\\n          <div class=\\\"ms-2 mt-3 mb-2  d-flex justify-content-start\\\">\\n            <ion-avatar [routerLink]=\\\"['/tabs/home/perfil',item.user._id]\\\"   style=\\\"max-height: 35px; max-width: 35px;\\\">\\n              <img  src=\\\"{{item.user.profileImg}}\\\">\\n            </ion-avatar>\\n            <ion-label [routerLink]=\\\"['/tabs/home/perfil',item.user._id]\\\" class=\\\"mt-2 mb-2 text-light fw-bold\\\"> &nbsp; {{item.user.username}}</ion-label>\\n          </div>\\n\\n        <img width=\\\"100%\\\" src=\\\"{{item.imagen}}\\\" alt=\\\"\\\">\\n  \\n        <ion-row class=\\\"cardfooter\\\">\\n          <ion-col>\\n                <div class=\\\"ms-1 mb-1 mt-1 d-flex justify-content-start\\\">\\n                  <ion-icon (click)=\\\"like_imagen(item._id)\\\" *ngIf=\\\"likes.indexOf(item._id) >= 0\\\" color=\\\"danger\\\" class=\\\"text-light\\\" name=\\\"heart\\\"></ion-icon>    \\n                  <ion-icon (click)=\\\"like_imagen(item._id)\\\" *ngIf=\\\"likes.indexOf(item._id)< 0\\\" class=\\\"text-light\\\" name=\\\"heart-outline\\\"></ion-icon>               \\n                  <ion-icon class=\\\"text-light ms-3\\\" [routerLink]=\\\"['/tabs/home/comentarios',item._id]\\\" name=\\\"chatbubble-outline\\\"></ion-icon>\\n                  \\n\\n                </div>\\n                <div *ngIf=\\\"item.likes != 0\\\" class=\\\"text-light fw-bold ms-2\\\">\\n                  {{item.likes}} Me gusta\\n                </div>\\n                <div class=\\\"ms-2\\\">\\n                 <a class=\\\"text-light fw-bold\\\" [routerLink]=\\\"['/perfil',item.user._id]\\\" style=\\\"text-decoration: none;\\\">{{item.user.username}}</a> <ion-text class=\\\"text-light ms-1\\\">{{item.descripcion}}</ion-text>\\n                </div>\\n                <div *ngIf=\\\"item.comentarios != 0\\\" class=\\\"ms-2\\\">\\n                  \\n                  <a [routerLink]=\\\"['/tabs/home/comentarios',item._id]\\\" style=\\\"text-decoration: none;color: #999999;\\\" >Ver los {{item.comentarios}} comentarios</a>\\n                </div>\\n          </ion-col>\\n        </ion-row>\\n      </ion-card>\\n     </div>\\n    \\n   </ng-container>\\n    \\n   <ng-container *ngIf=\\\"fotos.length == 0 && !load_data \\\">\\n    <h1 class=\\\"mt-5 text-center text-light\\\">NO HAY FOTOS SUBIDAS</h1>\\n  </ng-container>\\n\\n\\n\\n</ion-content>\\n\\n\\n\\n\";"],"sourceRoot":"webpack:///"}