{"version":3,"sources":["./src/app/misfotos/misfotos-routing.module.ts","./src/app/misfotos/misfotos.module.ts","./src/app/misfotos/misfotos.page.ts","./src/app/misfotos/misfotos.page.scss","./src/app/misfotos/misfotos.page.html"],"names":[],"mappings":"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","file":"src_app_misfotos_misfotos_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MisfotosPage } from './misfotos.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MisfotosPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MisfotosPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MisfotosPageRoutingModule } from './misfotos-routing.module';\n\nimport { MisfotosPage } from './misfotos.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MisfotosPageRoutingModule\n  ],\n  declarations: [MisfotosPage]\n})\nexport class MisfotosPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { GLOBALSOCKET } from '../services/GLOBAL';\nimport { io } from \"socket.io-client\";\nimport { FotosService } from '../services/foto.service';\nimport { AlertController } from '@ionic/angular';\nimport Swal from 'sweetalert2';\n@Component({\n  selector: 'app-misfotos',\n  templateUrl: './misfotos.page.html',\n  styleUrls: ['./misfotos.page.scss'],\n})\nexport class MisfotosPage implements OnInit {\n  public fotos : Array<any> = [];\n  nombre: string;\n  descripcion: string;\n  imagePreview: any;\n  ImageFile: File;\n  public filtro;\n  public identity;\n  public token;\n  public load_response:any;\n  public likes;\n  public socket = io(GLOBALSOCKET.url,{transports: ['websocket'], upgrade: false});\n\n  constructor(\n    private _fotoService:FotosService,\n    public alertController:AlertController\n  ) {\n    this.token = localStorage.getItem('token');\n    this.identity = JSON.parse(localStorage.getItem('identity'));\n   }\n\n   ngOnInit(): void {\n    this.socket.on('get-data',(data)=>{\n      this.obtener_fotos_user();\n    })\n\n    this.socket.on('get-comments',(data)=>{\n      this.obtener_fotos_user();\n    })\n\n    this.socket.on('get-images',(data)=>{\n      this.obtener_fotos_user();\n    })\n\n    this.obtener_fotos_user();\n  }\n\n  obtener_fotos_user()\n  {\n    this._fotoService.obtener_fotos_user(this.token).subscribe(\n      response =>{\n        this.fotos = response.data;\n        this.likes = response.user_likes;\n\n      },\n      error =>{\n        console.log(error);\n      }\n    )\n  }\n  \n  like_imagen(fotoid)\n  {\n    this._fotoService.like_foto(fotoid,this.token).subscribe(\n      response => {\n        this.socket.emit('like-image',{data:response.dislike});\n        var search = this.likes.indexOf(fotoid);\n\n        if(search != -1){\n          this.likes.splice(search,1);\n          \n        }else{\n          this.likes.push(fotoid);\n        }\n\n      },error =>{\n        Swal.fire({\n          icon:'error',\n          title:'ERROR!',\n          text:error.error.message\n        })\n      }\n    )\n  }\n\n\n\n  async eliminar_foto(id:any)\n  { \n    \n    const alert = await this.alertController.create({\n      header:'ConfirmaciÃ³n',\n      message:'Estas seguro de eliminar esta imagen?',\n      buttons:[\n        {\n          text:'Si,eliminar',\n          handler:() => { \n            this._fotoService.eliminar_foto(id,this.token).subscribe(\n              response  => {\n                this.obtener_fotos_user();\n        \n        \n              },\n              error  => {\n                console.log(error);\n              }\n            ) \n          \n          }\n          \n        },\n        {\n          text:'No',\n          handler:()=>{\n            console.log('No se elimino')\n          }\n        }\n      ]\n    })\n    \n      await alert.present();\n      \n  }\n\n}\n","export default \":root {\\n  --ion-safe-area-top: 20px;\\n  --ion-safe-area-bottom: 22px;\\n}\\n\\nion-card {\\n  background-color: #242526;\\n}\\n\\nion-icon {\\n  font-size: 24px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pc2ZvdG9zLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHlCQUFBO0VBQ0EsNEJBQUE7QUFDSjs7QUFFQTtFQUNJLHlCQUFBO0FBQ0o7O0FBRUE7RUFDRSxlQUFBO0FBQ0YiLCJmaWxlIjoibWlzZm90b3MucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOnJvb3Qge1xyXG4gICAgLS1pb24tc2FmZS1hcmVhLXRvcDogMjBweDtcclxuICAgIC0taW9uLXNhZmUtYXJlYS1ib3R0b206IDIycHg7XHJcbiAgfVxyXG5cclxuaW9uLWNhcmR7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjQyNTI2O1xyXG59XHJcblxyXG5pb24taWNvbiB7XHJcbiAgZm9udC1zaXplOiAyNHB4O1xyXG59Il19 */\";","export default \"<ion-header>\\n\\n  <ion-toolbar>\\n\\n      <ion-text class=\\\"ms-3 text-light fw-bold\\\">Tus fotos</ion-text>\\n    <ion-buttons  slot=\\\"end\\\"  >\\n      <ion-icon [routerLink]=\\\"['/tabs/mis-fotos/new-foto']\\\"  class=\\\"me-3 text-light\\\" name=\\\"add-circle\\\"></ion-icon>\\n    </ion-buttons>\\n\\n  </ion-toolbar>\\n\\n</ion-header>\\n\\n\\n<ion-content>\\n\\n\\n<ng-container *ngIf=\\\"fotos.length != 0\\\" >\\n\\n<div *ngFor=\\\"let item of fotos\\\"> \\n  \\n  <ion-card style=\\\"background-color: #242526;\\\" >\\n\\n      <div class=\\\"ms-2 mt-3 mb-2  d-flex justify-content-start\\\">\\n        <ion-avatar [routerLink]=\\\"['/myprofile']\\\" routerLinkActive=\\\"router-link-active\\\"  style=\\\"max-height: 35px; max-width: 35px;\\\">\\n          <img  src=\\\"{{item.user.profileImg}}\\\">\\n        </ion-avatar>\\n        \\n        <ion-label class=\\\"mt-2 mb-2 text-light fw-bold\\\"> &nbsp; {{item.user.username}}</ion-label>\\n        <ion-icon (click)=\\\"eliminar_foto(item._id)\\\"  class=\\\"ms-auto me-2\\\" color=\\\"danger\\\" name=\\\"trash-bin\\\"></ion-icon>\\n      </div>\\n\\n    <img width=\\\"100%\\\" src=\\\"{{item.imagen}}\\\" alt=\\\"\\\">\\n\\n    <ion-row class=\\\"cardfooter\\\">\\n      <ion-col>\\n            <div class=\\\"ms-1 mb-1 mt-1 d-flex justify-content-start\\\">\\n              <ion-icon (click)=\\\"like_imagen(item._id)\\\" *ngIf=\\\"likes.indexOf(item._id) >= 0\\\" color=\\\"danger\\\" class=\\\"text-light\\\" name=\\\"heart\\\"></ion-icon>    \\n              <ion-icon (click)=\\\"like_imagen(item._id)\\\" *ngIf=\\\"likes.indexOf(item._id)< 0\\\" class=\\\"text-light\\\" name=\\\"heart-outline\\\"></ion-icon>                \\n              <ion-icon class=\\\"text-light ms-3\\\"   [routerLink]=\\\"['/tabs/mis-fotos/comentarios',item._id]\\\" name=\\\"chatbubble-outline\\\"></ion-icon>\\n              \\n            \\n            </div>\\n            <div *ngIf=\\\"item.likes != 0\\\" class=\\\"text-light fw-bold ms-2\\\">\\n              {{item.likes}} Me gusta\\n            </div>\\n            <div class=\\\"ms-2\\\">\\n             <a class=\\\"text-light fw-bold\\\" style=\\\"text-decoration: none;\\\">{{item.user.username}}</a> <ion-text class=\\\"text-light ms-1\\\">{{item.descripcion}}</ion-text>\\n            </div>\\n            <div *ngIf=\\\"item.comentarios != 0\\\" class=\\\"ms-2\\\">\\n              \\n              <a [routerLink]=\\\"['/tabs/mis-fotos/comentarios',item._id]\\\" style=\\\"text-decoration: none;color: #999999;\\\" >Ver los {{item.comentarios}} comentarios</a>\\n            </div>\\n      </ion-col>\\n    </ion-row>\\n  </ion-card>\\n </div> \\n\\n</ng-container>\\n\\n\\n\\n\\n</ion-content>\\n\\n\";"],"sourceRoot":"webpack:///"}